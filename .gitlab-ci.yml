image: acquia/ads-local:lando-php-7.3-nodejs-10

stages:
  - validate

variables:
  BLT: ./vendor/bin/blt

cache:
  paths:
    - $HOME/.npm
    - $HOME/.nvm
    - vendor
    - docroot/core
    - docroot/modules/contrib
    - docroot/themes/contrib
    - docroot/profiles/contrib
    - docroot/libraries

validate:
  stage: validate
  script:
    # Install required dependencies using composer
    - composer install --ignore-platform-reqs
    # Validate composer, phpcs ...
    - $BLT validate
